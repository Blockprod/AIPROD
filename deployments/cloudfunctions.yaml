# Cloud Functions deployment configuration
# Déployez avec: gcloud functions deploy <function-name> --gen2 --runtime python311

functions:
  # Fonction de pré-traitement d'entrée
  - name: aiprod-sanitizer
    runtime: python311
    entryPoint: sanitize_input
    triggerHttp: true
    memory: 512MB
    timeout: 60s
    environmentVariables:
      GOOGLE_CLOUD_PROJECT: PROJECT_ID
      LOG_LEVEL: INFO
    source: src/api/functions/input_sanitizer.py

  # Fonction d'optimisation financière
  - name: aiprod-financial
    runtime: python311
    entryPoint: optimize_costs
    triggerHttp: true
    memory: 256MB
    timeout: 30s
    environmentVariables:
      GOOGLE_CLOUD_PROJECT: PROJECT_ID
      DAILY_BUDGET_LIMIT: "100.00"
    source: src/api/functions/financial_orchestrator.py

  # Fonction de QA technique
  - name: aiprod-qa-gate
    runtime: python311
    entryPoint: validate_technical
    triggerHttp: true
    memory: 512MB
    timeout: 120s
    environmentVariables:
      GOOGLE_CLOUD_PROJECT: PROJECT_ID
      LOG_LEVEL: INFO
    source: src/api/functions/technical_qa_gate.py
# Notes de déploiement:
# 1. Remplacer PROJECT_ID par votre ID de projet GCP
# 2. S'assurer que les APIs nécessaires sont activées
# 3. Configurer les secrets dans Secret Manager
# 4. Déployer avec: ./scripts/deploy.sh functions
